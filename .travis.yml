sudo: required
dist: trusty
#group: edge
env:
  global:
  - DOCKER_VERSION="1.9.1-0~trusty"

language: python
services:
  - docker
before_install:
  - sudo apt-get -qq update
  #- sudo apt-get install -o Dpkg::Options::="--force-confold" --force-yes -y docker-engine
  - sudo apt-get remove docker-engine -yq
  - sudo apt-get install docker-engine=$DOCKER_VERSION -yq --no-install-suggests --no-install-recommends --force-yes -o Dpkg::Options::="--force-confnew"
install:
  # avoid bug https://github.com/ansible/ansible/issues/23016 until 2.2.3 is released
  # ref: https://github.com/metacloud/molecule/issues/783
  - pip install ansible==2.2.1 
  - pip install molecule
  # - pip install required driver (e.g. docker, python-vagrant, shade)
  - pip install docker
script:
  - molecule test
notifications:
    webhooks: https://galaxy.ansible.com/api/v1/notifications/